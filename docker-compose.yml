services:
  ip-intel:
    build: .
    container_name: ip-intel
    restart: unless-stopped
    ports:
      - "9090:9090"
    volumes:
      - ./data:/data
    environment:
      - PORT=9090
      - HOST=0.0.0.0
      - CACHE_TTL_HOURS=6
      - MMDB_PATH=/data/GeoLite2-ASN.mmdb
      # Optional: persistent cache (SQLite, stores API results across restarts)
      # - PERSISTENT_CACHE=true
      # - PERSISTENT_CACHE_PATH=/data/ip-cache.db
      # - PERSISTENT_CACHE_TTL_DAYS=7
      # Optional: authentication key (clients must send Authorization: Bearer <key>)
      # - AUTH_KEY=your_secret_key_here
      # Optional: API keys for premium providers
      # - IPINFO_TOKEN=your_token_here
      # - IPDATA_API_KEY=your_key_here
      # Optional: provider priority (comma-separated)
      # - ENABLED_PROVIDERS=ip-api,ipwhois,freeipapi,ipapi-co,ipdata,ipinfo
